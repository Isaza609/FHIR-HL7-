# Temario – Presentación académica (30 minutos)

**Proyecto:** Interoperabilidad de Agendas con HL7 FHIR – ACME Salud  
**Duración total:** 30 minutos (incluye cierre y preguntas si el profesor lo indica).

---

## División en 3 expositores (~10 min cada uno)

Cada quien estudia **solo su sección** y los archivos listados en “Qué estudiar”.

Asignación **aleatoria** de roles. La carga es **equitativa**: ~10 min de exposición y un volumen similar de material por bloque (quien hace la demo ensaya Postman; los demás priorizan documentos y ejemplos).

| Quién | Bloque | Tiempo | Qué le toca |
|-------|--------|--------|-------------|
| **Danilo** | Contexto + Teoría FHIR | ~10 min | Problema ACME, escenario, qué es FHIR y recursos (con ejemplos Slot y Appointment) |
| **Andrea** | Arquitectura + Demostración API | ~10 min | Servidor central, flujo de agendamiento, Postman en vivo (GET Slot, POST Appointment) |
| **Eddie** | Interfaces + Cierre | ~10 min | Mockups/frontend por canal, flujos (disponibilidad, agendar, cancelar), conclusiones y referencias |

*Si alguien prefiere otro bloque, el equipo puede intercambiar roles.*

---

### Danilo – Contexto y Teoría FHIR (~10 min)

**Qué te toca exponer:** Introducción al proyecto, problema de ACME Salud, estándar HL7 FHIR y recursos del modelo (con 2 ejemplos JSON).

**Qué sustentar:**
- Problema: 3 sedes, varios canales; hay que unificar agendas con un modelo común (FHIR).
- FHIR R4: estándar de intercambio en salud (REST, JSON); recursos normalizados con referencias.
- Recursos: Organization, Location, HealthcareService, Practitioner/Role, Patient, Coverage, Schedule, **Slot**, **Appointment**, AppointmentResponse.

**Qué mostrar en pantalla:**
- Diapositivas: tabla sedes/servicios, canales.
- Archivos JSON: `fhir_resources/Slot/slot-pediatria-001.json` y `fhir_resources/Appointment/appt-ejemplo.json` (explicar campos clave).

**Qué estudiar (solo tu parte):**
- `docs_plan/1.Documento de contexto.md` (completo).
- Secciones **1** y **2** de este mismo documento (Contexto y Teoría).
- Contenido de `fhir_resources/Slot/slot-pediatria-001.json` y `fhir_resources/Appointment/appt-ejemplo.json`.

**Frase para cerrar tu bloque:** “Con este modelo de datos pasamos a ver cómo se integra en la arquitectura y cómo se usa en la API; **Andrea** les muestra el servidor central y la demostración en Postman.”

---

### Andrea – Arquitectura y Demostración API (~10 min)

**Qué te toca exponer:** Arquitectura de servidor FHIR central, flujo de agendamiento (consulta Slot → POST Appointment → Slot busy → AppointmentResponse) y demostración en vivo con Postman.

**Qué sustentar:**
- Un solo servidor FHIR para todos los canales (RNF-02); mismo modelo para todos (RNF-06).
- Flujo: GET Slot libres → POST Appointment → actualizar Slot a busy → AppointmentResponse.
- Servidor usado: HAPI FHIR R4 (`http://hapi.fhir.org/baseR4`); filtros para no mezclar con otros proyectos.

**Qué mostrar en pantalla:**
- Diagrama de `docs/arquitectura-servidor-central.md` (canales → servidor central).
- Postman: (1) GET metadata (opcional), (2) GET Slot?status=free&schedule=Schedule/sched-pr-casas-2025-02, (3) POST Appointment (cuerpo de `appt-ejemplo.json`), (4) explicar Slot→busy y AppointmentResponse.
- Opcional: mencionar `scripts/cargar_recursos.py` y `scripts/consulta_slots_libres.py`.

**Qué estudiar (solo tu parte):**
- `docs/arquitectura-servidor-central.md`.
- Secciones **3** y **4** de este documento (Modelo/Arquitectura y Demostración).
- `README.md` (servidor, Postman, filtros).
- `config/filtros-servidor-publico.json`.
- Colección Postman: carpetas Slot y Appointment; peticiones “(solo ACME)” o equivalentes.
- Docs: `docs/RF-06-consulta-disponibilidad.md`, `docs/RF-07-agendamiento-cita.md` (resumen).

**Checklist antes de exponer:**
- [ ] Postman con colección e entorno “ACME Salud - HAPI baseR4” importados y seleccionados.
- [ ] Probar GET Slot y GET metadata antes del día de la presentación.

**Frase para cerrar tu bloque:** “Ese mismo flujo es el que consumen las interfaces que construimos; **Eddie** les muestra los mockups o la aplicación y el cierre.”

---

### Eddie – Interfaces y Cierre (~10 min)

**Qué te toca exponer:** Entregable de interfaces (wireframes/mockups o app en código), relación pantalla ↔ recurso FHIR, y cierre con conclusiones y referencias.

**Qué sustentar:**
- Entregable: wireframes/mockups o interfaces en código (Opción B); mismos flujos en todos los canales.
- Flujos: consulta de disponibilidad (RF-06), agendamiento (RF-07), cancelación (RF-08).
- Canales: web, app móvil (responsive), Call Center (operador), HIS (ventanilla).

**Qué mostrar en pantalla:**
- Si hay frontend: abrir app (`frontend/`: `npm run dev`) y recorrer Inicio/sede → Servicio → Disponibilidad (Slot) → Datos paciente → Confirmación (AppointmentResponse); opcional: Mis citas y Cancelación.
- Si solo mockups: capturas en `docs/mockups/` o `acme_mockups/` y tabla “Pantalla ↔ Recurso FHIR”.
- Diapositiva de cierre: resumen (problema → FHIR → arquitectura → API → interfaces), cumplimiento de entregables, referencias (HL7 FHIR R4, HAPI, docs_plan, repo).

**Qué estudiar (solo tu parte):**
- `docs/ENTREGABLE-mockups-wireframes.md` (alcance, checklist por canal, relación con FHIR).
- Secciones **5** y **6** de este documento (Interfaces y Cierre).
- Si hay frontend: `frontend/README.md`, estructura `src/pages/`, `src/services/`.
- Si hay mockups estáticos: carpeta `acme_mockups/` o `docs/mockups/`.

**Tabla que puedes poner en diapositiva:**

| Pantalla / acción            | Recurso FHIR / operación                                      |
|-----------------------------|----------------------------------------------------------------|
| Consulta de disponibilidad  | GET Slot?status=free&schedule=...                             |
| Confirmación de cita        | Appointment, AppointmentResponse                             |
| Cancelación                 | Appointment (status=cancelled, cancellationReason), Slot free |

**Frase para cerrar:** “Con esto cerramos la presentación; cumplimos con el modelo FHIR, los ejemplos, las interfaces y las referencias. ¿Alguna pregunta?”

---

## Resumen ejecutivo para el expositor

| Bloque | Tema | Tiempo | Qué mostrar |
|--------|------|--------|-------------|
| 1 | Contexto y problema | ~4 min | Diapositivas: ACME, sedes, canales, objetivo |
| 2 | Teoría: HL7 FHIR y recursos | ~6 min | Diapositivas + 1–2 recursos JSON en pantalla |
| 3 | Modelo de datos y arquitectura | ~5 min | Diagrama servidor central + tabla de recursos |
| 4 | Demostración: API y flujo | ~8 min | Postman o script: GET Slot, POST Appointment, PUT Slot |
| 5 | Interfaces (mockups / frontend) | ~4 min | Capturas o app en vivo (consulta, agendar, cancelar) |
| 6 | Cierre y referencias | ~3 min | Conclusiones, fuentes, repo |

---

## 1. Contexto y planteamiento del problema (≈ 4 min)

### Qué sustentar

- **Problema:** La institución ACME Salud tiene tres puntos de atención (Norte, Centro, Sur) y necesita **unificar** el sistema de agendas para que los pacientes puedan solicitar citas desde cualquier canal.
- **Rol:** Analista de Interoperabilidad; solución con **modelo común de datos** e interoperabilidad con **HL7 FHIR**.

### Qué explicar

- **Escenario:** 3 sedes (Norte 1100155555-1, Centro 1100155555-2, Sur 1100155555-3) con servicios distintos (medicina general, pediatría, obstetricia, nefrología, etc.).
- **Canales:** Sitio web, Call Center, app móvil, ventanilla HIS.
- **Entregables del equipo:** presentación 30 min, ejemplos FHIR, wireframes/mockups, referencias.

### Qué mostrar (opcional en diapositiva)

- Tabla de sedes y servicios (del documento de contexto).
- Lista de canales de atención.

**No hace falta mostrar código en este bloque.**

---

## 2. Teoría: HL7 FHIR y recursos utilizados (≈ 6 min)

### Qué sustentar

- **HL7 FHIR R4** es un estándar de intercambio de información en salud (recursos, REST, JSON).
- Los recursos son **entidades normalizadas** con identificador, campos estándar y referencias entre ellos.

### Qué explicar (teoría breve)

- **FHIR:** Fast Healthcare Interoperability Resources; REST + JSON (o XML); versión usada **R4**.
- **Recursos clave del proyecto:**
  - **Organization** → Institución (ACME, aseguradoras).
  - **Location** → Sedes (Norte, Centro, Sur).
  - **HealthcareService** → Servicio por sede (ej. Pediatría Norte).
  - **Practitioner / PractitionerRole** → Médico y su rol en la organización/sede/servicio.
  - **Patient / Coverage** → Paciente y cobertura (aseguradora) para duración de citas.
  - **Schedule** → Agenda (por servicio o por médico), definida mensualmente.
  - **Slot** → Ventana de tiempo dentro de un Schedule (`free` / `busy`).
  - **Appointment** → Cita reservada; vincula Slot + Patient + PractitionerRole.
  - **AppointmentResponse** → Confirmación al paciente (inicio, fin, servicio, médico).

### Qué código / JSON mostrar

Abre **dos archivos** del repo y explícalos en una diapositiva o en pantalla:

1. **Slot** (espacio disponible):
   - Archivo: `fhir_resources/Slot/slot-pediatria-001.json`
   - Destacar: `resourceType`, `id`, `schedule`, `status: "free"`, `start`, `end` (ISO 8601).

2. **Appointment** (cita reservada):
   - Archivo: `fhir_resources/Appointment/appt-ejemplo.json`
   - Destacar: `status: "booked"`, `slot`, `participant` (Patient + PractitionerRole), `start`/`end`, `serviceType`.

**Frases clave:** “El Slot es la ventana de tiempo disponible; el Appointment es la reserva que la consume y referencia al paciente y al profesional.”

---

## 3. Modelo de datos y arquitectura (≈ 5 min)

### Qué sustentar

- **Un solo servidor FHIR central** recibe las peticiones de todos los canales (RNF-02).
- **Mismo modelo de datos** para todos los canales (RNF-06); lo que cambia es la interfaz (web, call center, app, HIS).

### Qué explicar

- Flujo: **Canal** → HTTP/REST (FHIR R4) → **Servidor FHIR** (Schedule / Slot / Appointment).
- Secuencia lógica al agendar:
  1. Consultar disponibilidad: `GET Slot?status=free&schedule=...`
  2. Crear cita: `POST Appointment` (referenciando Slot, Patient, PractitionerRole).
  3. Actualizar Slot a `busy` (PUT).
  4. Devolver/construir **AppointmentResponse** (inicio, fin, servicio, médico).

### Qué mostrar

- **Diagrama de arquitectura** (del doc `docs/arquitectura-servidor-central.md`): cajas de canales → servidor FHIR central.
- **Tabla resumen** de recursos (opcional, del README o de `docs_plan/4. Atributos mínimos de los recursos FHIR utilizados.md`).

**Código:** No obligatorio aquí; si quieres, una sola línea de ejemplo:  
`GET http://hapi.fhir.org/baseR4/Slot?status=free&schedule=Schedule/sched-pr-casas-2025-02`

---

## 4. Demostración: API y flujo (≈ 8 min)

### Qué sustentar

- Las operaciones del sistema se realizan con **peticiones HTTP** al servidor FHIR (HAPI en `http://hapi.fhir.org/baseR4`).
- Uso de **Postman** (o scripts Python) para mostrar el flujo real.

### Qué explicar

- **Servidor:** HAPI FHIR R4 público; filtros por recursos ACME para no mezclar con otros proyectos (`config/filtros-servidor-publico.json`).
- Orden de carga de recursos: Organization → Location → HealthcareService, Practitioner, PractitionerRole → Schedule → Slot; luego Patient, Coverage; Appointment cuando se agenda.

### Qué código / pantalla mostrar (en este orden)

1. **Metadatos (opcional, rápido)**  
   - En Postman: **GET** `http://hapi.fhir.org/baseR4/metadata`  
   - Mostrar que responde 200 y CapabilityStatement (solo 30 s).

2. **Consulta de disponibilidad (RF-06)**  
   - **GET** Slots libres (colección Postman “Slot → GET Slots libres (solo nuestros)” o):
   ```http
   GET http://hapi.fhir.org/baseR4/Slot?status=free&schedule=Schedule/sched-pr-casas-2025-02
   ```
   - Mostrar en la respuesta 2–3 Slot con `start`, `end`, `status: free`.

3. **Agendamiento (RF-07)**  
   - Mostrar el **cuerpo** de un `POST Appointment` (puedes usar el contenido de `fhir_resources/Appointment/appt-ejemplo.json` adaptado).
   - Explicar: “Se envía POST con el Slot elegido, el Patient, el PractitionerRole y el tipo de servicio.”
   - Opcional: ejecutar POST en vivo y luego **GET Appointment/{id}** para mostrar la cita creada.

4. **Slot a busy y AppointmentResponse**  
   - Explicar: “Tras crear el Appointment, el servidor (o nuestro flujo) actualiza el Slot a `status: busy` y se genera el AppointmentResponse con hora inicio/fin, servicio y médico.”
   - Si tienes tiempo: mostrar **PUT** Slot con `"status":"busy"` (o el script `cargar_recursos.py` / `consulta_slots_libres.py` como evidencia de automatización).

**Scripts opcionales para mencionar:**  
- `scripts/cargar_recursos.py` – carga masiva de recursos.  
- `scripts/consulta_slots_libres.py` – consulta Slot libres por Schedule.

---

## 5. Interfaces: mockups o frontend (≈ 4 min)

### Qué sustentar

- El entregable incluye **wireframes o mockups** (o interfaces implementadas); en este proyecto se opta por **interfaces en código** (Opción B del doc de mockups).

### Qué explicar

- Canales: web, app móvil (misma app responsive), Call Center (vista operador), HIS (ventanilla).
- Flujos cubiertos: **consulta de disponibilidad** (RF-06), **agendamiento** (RF-07), **cancelación** (RF-08).

### Qué mostrar

- **Si hay frontend (React + Vite):**
  - Abrir la app (`npm run dev` en `frontend/`).
  - Recorrer: **Inicio/sede** → **Servicio o profesional** → **Disponibilidad (Slot)** → **Datos paciente / tipo consulta** → **Confirmación (AppointmentResponse)**.
  - Opcional: **Mis citas** y **Cancelación** (motivo en `cancellationReason`).
  - Mencionar: “Las pantallas consumen el mismo servidor FHIR; el modelo es único.”

- **Si solo hay mockups/wireframes:**  
  - Mostrar capturas en `docs/mockups/` o `acme_mockups/` y relacionar cada pantalla con el recurso FHIR (Slot, Appointment, AppointmentResponse).

**Tabla útil (puedes ponerla en diapositiva):**

| Pantalla / acción           | Recurso FHIR / operación                    |
|-----------------------------|---------------------------------------------|
| Consulta de disponibilidad | GET Slot?status=free&schedule=...           |
| Confirmación de cita        | Appointment, AppointmentResponse           |
| Cancelación                 | Appointment (status=cancelled, cancellationReason), Slot (status=free) |

---

## 6. Cierre y referencias (≈ 3 min)

### Qué sustentar

- Se cumplieron los entregables: presentación 30 min, ejemplos del modelo con recursos FHIR, wireframes/mockups (o interfaz en código), referencias.
- El modelo común y el servidor central permiten **un solo punto de verdad** para las agendas, accesible desde todos los canales.

### Qué explicar (breve)

- Resumen: problema (agendas dispersas) → estándar FHIR → recursos (Schedule, Slot, Appointment, etc.) → arquitectura central → demostración API → interfaces.
- Limitaciones o mejoras futuras (ej.: servidor público compartido, filtros; o extensión a más sedes/servicios).

### Qué mostrar

- Diapositiva de **referencias**:
  - HL7 FHIR R4: https://hl7.org/fhir/R4/
  - HAPI FHIR: https://hapifhir.io/
  - Documentación del curso en `docs_plan/`
  - Repositorio del proyecto (si aplica)

---

## Checklist previo a la exposición

- [ ] Postman con colección e entorno ACME importados; entorno “ACME Salud - HAPI baseR4” seleccionado.
- [ ] Servidor HAPI accesible (probar GET metadata o GET Slot).
- [ ] Archivos JSON a mostrar abiertos: `slot-pediatria-001.json`, `appt-ejemplo.json`.
- [ ] Si vas a mostrar frontend: `npm install` y `npm run dev` en `frontend/` probados antes.
- [ ] Diagrama de arquitectura (docs) listo en diapositiva o en pestaña del navegador.
- [ ] Tiempos ensayados para no pasarte de 30 min (dejar 2–3 min de margen para preguntas).

---

## Estructura sugerida de diapositivas (número orientativo)

1. Portada – Proyecto integrador, ACME Salud, HL7 FHIR.
2. Planteamiento del problema y objetivo.
3. Escenario: sedes, servicios, canales.
4. ¿Qué es HL7 FHIR? (teoría breve).
5. Recursos FHIR del proyecto (tabla).
6. Ejemplo Slot (JSON o captura).
7. Ejemplo Appointment (JSON o captura).
8. Arquitectura: canales → servidor FHIR central.
9. Flujo: consulta Slot → POST Appointment → Slot busy → AppointmentResponse.
10. Demostración en vivo (Postman / script).
11. Interfaces (mockups o frontend).
12. Conclusiones y referencias.

Puedes agrupar 5–6–7 en una sola diapositiva “Modelo de datos – ejemplos” si prefieres menos slides.

---

## Resumen de estudio por persona (una hoja)

**Danilo – "El problema y el estándar" (~10 min)**  
- Leer: `docs_plan/1.Documento de contexto.md` + secciones 1 y 2 de este temario.  
- Revisar: `fhir_resources/Slot/slot-pediatria-001.json`, `fhir_resources/Appointment/appt-ejemplo.json`.  
- Exponer: contexto ACME, sedes, canales → qué es FHIR → recursos del proyecto → explicar Slot y Appointment en pantalla.

**Andrea – "Arquitectura y API en vivo" (~10 min)**  
- Leer: `docs/arquitectura-servidor-central.md`, `README.md` (servidor y Postman), secciones 3 y 4 de este temario.  
- Revisar: Postman (Slot, Appointment), `config/filtros-servidor-publico.json`, `docs/RF-06-consulta-disponibilidad.md`, `docs/RF-07-agendamiento-cita.md`.  
- Exponer: diagrama servidor central → flujo (GET Slot → POST Appointment → Slot busy → Response) → demostración en Postman.

**Eddie – "Interfaces y cierre" (~10 min)**  
- Leer: `docs/ENTREGABLE-mockups-wireframes.md`, secciones 5 y 6 de este temario.  
- Revisar: `frontend/` (si existe) o `acme_mockups/` / `docs/mockups/`.  
- Exponer: pantallas por canal (web, app, call center, HIS) → relación con FHIR → conclusiones y referencias.

---

*Documento generado para apoyo a la presentación académica de 30 minutos del proyecto Interoperabilidad de Agendas con HL7 FHIR.*
