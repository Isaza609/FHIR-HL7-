# Diagrama Conceptual de Relaciones

## 1. Estructura Organizacional

```
Organization (ACME Salud)
│
├── Location (Clínica Norte)
├── Location (Clínica Centro)
└── Location (Clínica Sur)
```

- Una **Organization** puede tener múltiples **Location**
- Cada **Location** pertenece a una única **Organization**

---

## 2. Servicios de Salud

```
Location
│
└── HealthcareService
```

- Cada **Location** puede ofrecer múltiples **HealthcareService**
- Cada **HealthcareService** está asociado a una **Location** específica

**Ejemplo conceptual**

```
Location (Norte)
└── HealthcareService (Pediatría)
```

---

## 3. Profesionales de Salud

```
Practitioner
│
└── PractitionerRole
      │
      ├── Organization (ACME Salud)
      ├── Location
      └── HealthcareService
```

- Un **Practitioner** puede tener uno o varios **PractitionerRole**
- El **PractitionerRole** define: Organización, Sede y Servicio

---

## 4. Aseguradoras y Cobertura

```
Patient
│
└── Coverage
      │
      └── Organization (Aseguradora)
```

- Un **Patient** puede tener una o varias **Coverage**
- Coverage.beneficiary → Patient
- Coverage.payor → Organization

---

## 5. Modelo de Agenda

### 5.1 Agenda por Servicio

```
HealthcareService
│
└── Schedule (Mensual)
      │
      └── Slot (Intervalos de tiempo)
```

### 5.2 Agenda por Médico

```
PractitionerRole
│
└── Schedule (Mensual)
      │
      └── Slot (Intervalos de tiempo)
```

- Un **Schedule** pertenece a HealthcareService o PractitionerRole
- Un **Schedule** contiene múltiples **Slot**
- Cada **Slot** representa un intervalo de tiempo

---

## 6. Modelo de Cita Médica

```
Appointment
│
├── Patient
├── PractitionerRole
├── HealthcareService
└── Slot
```

Cuando se confirma:

```
AppointmentResponse
│
└── Appointment
```

---

## 7. Flujo Simplificado de Estados

### Creación

```
Slot.status = free
↓
Se crea Appointment
↓
Slot.status = busy
Appointment.status = booked
```

### Cancelación

```
Appointment.status = cancelled
Appointment.cancellationReason = motivo
↓
Slot.status = free
```

---

## Vista Global Resumida

```
Organization
 ├── Location
 │     └── HealthcareService
 │            └── Schedule
 │                   └── Slot
 │
 ├── Practitioner
 │      └── PractitionerRole
 │              └── Schedule
 │                     └── Slot
 │
 └── Patient
        └── Coverage
               └── Organization (Aseguradora)

Appointment
 ├── Patient
 ├── PractitionerRole
 ├── HealthcareService
 └── Slot

AppointmentResponse
 └── Appointment
```